<head>
    <title>My Google AJAX Search API Application</title>
    <script src="http://www.google.com/jsapi?key=ABQIAAAA78-tyKxQjW9znCEO3fQ-JBTEUtTaiXF2qzbwwyPAEqCO9nODUBS5mo9fUZAxoluQs_6BJ7tPWhDcsA" type="text/javascript"></script>
    <script language="Javascript" type="text/javascript">

    google.load("search", "1", {"language": "en"});
    
    var app;
    function OnLoad() {
      app = new App();
    }
    
    function App() {
      // Create a search control
      var searchControl = new google.search.SearchControl();

      // Add in a full set of searchers
      var localSearch = new google.search.LocalSearch();
      searchControl.addSearcher(new google.search.NewsSearch());

      // Set the Local Search center point
      localSearch.setCenterPoint("San Francisco, CA");

      // Tell the searcher to draw itself and tell it where to attach
      searchControl.draw(document.getElementById("searchcontrol"));

      // Execute an inital search
      searchControl.execute("money");
      
      searchControl.setSearchCompleteCallback(this, App.prototype.OnSearchComplete);
    }
    google.setOnLoadCallback(OnLoad);
    App.prototype.OnSearchComplete = function(sc, searcher) {
      if (searcher.results && searcher.results.length > 0) {
        "<%= @rsss = searcher.results>"
        for(var i=0; i < searcher.results.length; i++){
          var result = searcher.results[i];
          alert(result.url);
        }
      }
    }
    google.load("feeds", "1", {"language":"en"});
    function initialize() {
      var feedControl = new google.feeds.FeedControl();
      feedControl.addFeed("http://pipes.yahoo.com/pipes/pipe.run?_id=470456ddb1b03d367ce357b67bd823e3&_render=rss", "Yahoo Pipes");
      feedControl.addFeed("http://feeds.feedburner.com/Techcrunch", "TechCrunch");
      feedControl.draw(document.getElementById("feedControl"));
    }
    google.setOnLoadCallback(initialize);
    </script>
  </head>
  <body>
    <div id="searchcontrol">Loading...</div>
    <br>------
    <div id="feedControls" style="display:none;">Loading...</div>
    <div id="feedControl">Loading</div>
  </body>